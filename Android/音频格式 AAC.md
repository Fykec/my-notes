parent nodes: [Android\_Wiki](Android_Wiki.html)\
\

音频格式 AAC {.heading-level2}
------------

[http://heidianfeng.blog.163.com/blog/static/61843456201093010734662/](http://heidianfeng.blog.163.com/blog/static/61843456201093010734662/)\
 \
 网易 新闻 微博 邮箱 闪电邮 相册 有道 手机邮 印像派 梦幻人生 更多 博客
博客首页 博客话题 热点专题 博客油菜地 找朋友 博客圈子 博客风格 手机博客
短信写博 邮件写博 博客复制 群博客 摄影 主题展区 每日专题 影像故事
高级拍客 摄影人物志 摄影师专访 摄影点评 发现好博客 \
 群博客召集令.注册 登录 .. 显示下一条 | 关闭 \
 hager的博客\
 新的开始

首页 日志 相册 音乐 收藏 博友 关于我 . \
 日志 hager

最新日志\
 ASIHTTPRequest 详解iphone 使用Cocoa XML-RPC FIphone
使用post方法发送数iPhone发送数据到服务器并接A**寻路中使用2叉堆的算法例iPhone
上实现气泡弹出的代该作者的其他文章\
 博主推荐\
 相关日志\
 随机阅读\
 首页推荐\

八千湘女上天山（图）美女在啤酒里泡澡实拍印度超奢华婚礼日本大地震领导没先走猛男与狮群亲密接触干露露携母大闹录影棚更多\>\>对“推广广告”提建议
\
 \
 \
 iPhone开发内存管理 \
 内存管理.AAC 文件解析及解码流程iPhone 2010-10-30 10:07:34 阅读316 评论0
字号：大中小 订阅 .\
 \

[http://wiki.multimedia.cx/index.php?title=Understanding\_AAC](http://wiki.multimedia.cx/index.php?title=Understanding_AAC)\
 \

[http://atomicparsley.sourceforge.net/mpeg-4files.html](http://atomicparsley.sourceforge.net/mpeg-4files.html)\
 \
 OUTLINE：**

＊ AAC概述\
 ＊ AAC规格简述\
 ＊ AAC特点 \
 \
 ＊ AAC音频文件解析

＊ AAC解码流程

＊ 术语说明\
 \

一.AAC概述\
 \

二、AAC规格简述\
 \

AAC共有9种规格，以适应不同的场合的需要：

编码效率，在中等码率的编码效率以及音质方面，都能找到平衡点

的音频部份就包括了该规格音频文件

Nero ACC 编码器支持\
 \

目前使用最多的是LC和HE(适合低码率)。流行的Nero
AAC编码程序只支持LC，HE，HEv2这三种规格，编码后的AAC音频，规格显示都是LC。HE其实就是AAC（LC）+SBR技术，HEv2就是AAC（LC）+SBR+PS技术；\
 \
 \
 \
 \
 \
 \

HE：“High Efficiency”（高效性）。HE-AAC
v1（又称AACPlusV1，SBR)，用容器的方法实现了AAC（LC）+SBR技术。SBR其实代表的是Spectral
Band
Replication(频段复制)。简要叙述一下，音乐的主要频谱集中在低频段，高频段幅度很小，但很重要，决定了音质。如果对整个频段编码，若是为了保护高频就会造成低频段编码过细以致文件巨大；若是保存了低频的主要成分而失去高频成分就会丧失音质。SBR把频谱切割开来，低频单独编码保存主要成分，高频单独放大编码保存音质，“统筹兼顾”了，在减少文件大小的情况下还保存了音质，完美的化解这一矛盾。\
 \
 \
 HEv2：用容器的方法包含了HE-AAC v1和PS技术。PS指“parametric
stereo”（参数立体声）。原来的立体声文件文件大小是一个声道的两倍。但是两个声道的声音存在某种相似性，根据香农信息熵编码定理，相关性应该被去掉才能减小文件大小。所以PS技术存储了一个声道的全部信息，然后，花很少的字节用参数描述另一个声道和它不同的地方。\
 \

三、AAC特点\
 \

如AC-3、MP3等。并且其质量可以同未压缩的CD音质相媲美。

更高的滤波器组，因此它可以达到更高的压缩比。

多种语言的兼容能力、还有多达15个内嵌数据流。

四、AAC音频文件格式\
 \

1.  

1.  

ADIF头信息位于AAC文件的起始处，接下来就是连续的 raw data blocks。

（1）帧同步目的在于找出帧头在比特流中的位置，13818-7规定，aac
ADTS格式的帧头

（2）ADTS的头信息为两部分组成，其一为固定头信息，紧接着是可变头信息。固定头信息中

3.AAC元素信息\
 \
 \
 在AAC中，原始数据块的组成可能有六种不同的元素：\
 SCE: Single Channel
Element单通道元素。单通道元素基本上只由一个ICS组成。一个

CPE: Channel Pair Element
双通道元素，由两个可能共享边信息的ICS和一些联合立体

CCE: Coupling Channel Element
藕合通道元素。代表一个块的多通道联合立体声信息

LFE: Low Frequency Element 低频元素。包含了一个加强低采样频率的通道。\
 DSE: Data Stream Element
数据流元素，包含了一些并不属于音频的附加信息。\
 PCE: Program Config Element
程序配置元素。包含了声道的配置信息。它可能出现在

FIL: Fill Element
填充元素。包含了一些扩展信息。如SBR，动态范围控制信息等。\
 \
 \
 4.AAC文件处理流程\
 (1)　判断文件格式，确定为ADIF或ADTS\
 \
 (2)　若为ADIF，解ADIF头信息，跳至第6步。\
 (3)　若为ADTS，寻找同步头。\
 (4)解ADTS帧头信息。\
 (5)若有错误检测，进行错误检测。\
 (6)解块信息。\
 (7)解元素信息。\
 \

五、AAC解码流程\
 \
 \

（AAC解码流程图）\
 \

（SBR）这几个模块之后，得出左右声道的PCM码流，再由主控模块将其放入输出缓冲区输出到

声音播放设备。\
 \

技术解析：

其中，输入输出缓冲区均由DSP控制模块提供接口。输出缓冲区中将存放的数据为解码出来的\

PCM数据，代表了声音的振幅。它由一块固定长度的缓冲区构成，通过调用DSP控制模块的接
\
 \

口函数，得到头指针，在完成输出缓冲区的填充后，调用中断处理输出至I2S接口所连接的\
 音频ADC芯片（立体声音频DAC和DirectDrive耳机放大器）输出模拟声音。\
 \

即将尺度因子和量化后的频谱信息进行哈夫曼编码。全局增益编码成一个8位的无符号整数，\

第一个尺度因子与全局增益值进行差分编码后再使用尺度因子编码表进行哈夫曼编码。后续\

的各尺度因子都与前一个尺度因子进行差分编码。量化频谱的无噪编码有两个频谱系数的划分。
其一为4元组和2元组的划分，另一个为节划分。对前一个划分来说，确定了一次哈夫曼表\

查找出的数值是4个还是2个。对后一个划分来说，确定了应该用哪一个哈夫曼表，一节中\
 含有若干的尺度因子带并且每节只用一个哈夫曼表。

同一个哈夫曼表，考虑到编码效率，每一段的边界最好同尺度因子带的边界重合。所以每一段\
 必段传送信息应该有：段长度，所在的尺度因子带，使用的哈夫曼表。

一起，共享一个尺度因子从而得到更好的编码效率。这样做必然会引起交替，即本来是以

c[组][窗][尺度因子带][ 系数索引]\
 \
 为顺序的系数排列，变为将尺度因子带同的系数放在一起：\
 c[组][尺度因子带][窗][ 系数索引]\
 \
 这样就引起了相同窗的系数的交替。

escape方法。前者跟mp3编码方法相似，在许多大量化值出现时采用专门的哈夫曼表，这个表\

暗示了它的使用将会在哈夫曼编码后面跟跟一对escape值及对值的符号。在用脉冲escape\
 \

方法时，大数值被减去一个差值变为小数值，然后使用哈夫曼表编码，后面会跟一个脉冲结构\
 来帮助差值的还原.\
 \
 \

在AAC编码中，逆量化频谱系数是由一个非均匀量化器来实现的，在解码中需进行其逆运算。
即保持符号并进行4/3次幂运算。\

在频域调整量化噪声的基本方法就是用尺度因子来进行噪声整形。尺度因子就是一个用来改\

变在一个尺度因子带的所有的频谱系数的振幅增益值。使用尺度因子这种机制是为了使用非\
 均匀量化器在频域中改变量化噪声的比特分配。

频率线根据人耳的听觉特性被分成多个组，每个组对应若干个尺度因子，这些组就叫做尺度\

因子带。为了减少信息含有短窗的边信息，连续的短窗可能会被分为一组，即将若干个短窗\
 当成一个窗口一起传送，然后尺度因子将会作用到所有分组后的窗口去。

声后，将些噪声不进行量化编码，而是采用一些参数告诉解码器端这是某种噪声，然后解\
 码器端将会对这些噪声用一些随机的编码来制造出这一类型的噪声。

信号既不是音调，在时间上也无强烈的能量变动，就被认为是噪声信号。其信号的音调及能\
 量变化都在心理声学模型中算出。

声解码与PNS解码互斥，故可以用参数ms\_used来表明是否两个声道都用同样的PNS。如果
\
 \

ms\_used参数为1，则两个声道会用同样的随机向量来生成噪声信号。PNS的能量信号用\

noise\_nrg来表示，如果使用了PNS，则能量信号将会代替各自的尺度因子来传送。噪声能量

编码同尺度因子一样，采用差分编码的方式。第一个值同样为全局增益值。它同强度立体声位\

置值及尺度因子交替地放在一起，但对差分解码来说又彼此忽略。即下一个噪声能量值以上一\

个噪声能量值而不是强度立体声位置或尺度因子为标准差分解码。随机能量将会在一个尺度\
 因子带内产生noise\_nrg所计算出的平均能量分布。此项技术只有在MPEG-4
AAC中才会使用。

些特殊的语音和剧烈变化信号的量化上，TNS技术对音质的提高贡献巨大！

滤波过程来实现的。传统的变换编码方案常常遇到信号在时域变化非常剧烈的问题，特别是语\

音信号，这个问题是因为量化后的噪声分布虽然在频率域上得到控制，但在时域上却以一个常\

数分布在一个转换块内。如果这种块中信号变化得很剧烈却又不转向一个短块去，那这个常数\
 分布的噪声将会被听到。

任意一个域上做编码与在另一域上做预测编码等效，也就是说，在一个域内做预测编码可以在\

另一域内增加其解析度。量化噪声产生是在频域产生的，降低了时域的解析度，故在这里是在\
 频域上做预测编码。在AACplus中，由于基于AAC profile
LC，故TNS的滤波器阶数被限制在 \
 \
 12阶以内。

的。在进行IMDCT变换后，输出数值经过加窗，叠加，最后得到时域数值。

音质。如果对整个频段编码，若是为了保护高频就会造成低频段编码过细以致文件巨大；若是
\
 \

保存了低频的主要成分而失去高频成分就会丧失音质。SBR把频谱切割开来，低频单独编码保存\

主要成分，高频单独放大编码保存音质，“统筹兼顾”了，在减少文件大小的情况下还保存了\
 音质，完美的化解这一矛盾。

某种相似性，根据香农信息熵编码定理，相关性应该被去掉才能减小文件大小。所以PS技术\

存储了一个声道的全部信息，之后，用很少的字节当作参数来描述另一个声道和它不同的地方。\
 \
 \
 \

术语说明：\
 AAC: Advanced Audio Coding 高级音频编码\
 AAC LC: AAC with Low Complexity AAC的低复杂度配置\
 AAC plus: 也叫HE-AAC, AAC+,MPEG4 AAC LC加入SBR模块后形成的一个AAC版本\
 MPEG：Motion Picture Expert Group\
 \
 IMDCT：反离散余弦变换\
 ADIF：Audio Data Interchange Format 音频数据交换格式\
 ADTS：Audio Data Transport Stream 音频数据传输流\
 SCE: Single Channel Element单通道元素\
 CPE: Channel Pair Element 双通道元素\
 CCE: Coupling Channel Element 藕合通道元素\
 DSE: Data Stream Element 数据流元素\
 PCE: Program Config Element 程序配置元素\
 FIL: Fill Element 填充元素\
 ICS: Individual Channel Stream 独立通道流\
 PNS: Perceptual Noise Substitution 知觉噪声替换\
 SBR: Spectral Band Replication 频段复制\
 TNS: Temporal Noise Shaping 瞬时噪声整形\
 ch：channel 通道\
 PS：parametric stereo 参数立体声\
 SBR：Spectral Band Replication 频段复制\
 \
 \

[http://blog.163.com/raymondshen@126/blog/static/14512478520103674243662/?fromdm&fromSearch&isFromSearchEngine=yes](http://blog.163.com/raymondshen@126/blog/static/14512478520103674243662/?fromdm&fromSearch&isFromSearchEngine=yes)\
 \
 \
 \
 　AAC格式介绍　 \
 \
 　　AAC（Advanced Audio
Coding），中文称为“高级音频编码”，出现于1997年，最初是基于MPEG-2的音频编码技术，目的是取代MP3格式。2000年，MPEG-4标准出台，AAC重新集成了其特性，加入了SBR技术和PS技术，为区别于传统的MPEG-2
AAC，故含有SBR或PS特性的AAC又称为MPEG-4 AAC。 \
 \

　　作为一种高压缩比的音频压缩算法，远胜MP3；在音质方面，由于采用多声道，和使用低复杂性的描述方式，使其比几乎所有的传统编码方式在同规格的情况下更胜一筹。一般来说，AAC可以在对比MP3文件缩小30%的前题下提供更好的音质。AAC是目前唯一一个，能够在所有的EBU试听测试项目中获得“优秀”的网络广播格式。
\
 \
 　AAC与MP3规格对比　\

比特率

采样率

声道数

采样精度

　AAC格式扩展名　 \
 \
 •AAC - 基于MPEG-2的音频编码技术，属于传统的AAC编码。 \
 •MP4 - 基于MPEG-4的音频编码技术。 \
 •M4A -
苹果（Apple）公司对纯音频MP4文件采用的扩展名，本质和音频MP4相同。（包含视频的MP4文件为“.M4V”）
\
 　iTunes Store与iTunes Plus　 \
 \
 　　iTunes
Store是一个由苹果公司营运的在线数字媒体商店，需要使用iTunes软件连接。在2003年4月28日开幕，目前是美国排名第一的音乐商店。至2009年1月为止，iTunes
Store已经售出超过60亿首歌曲，占有全球线上音乐销售量超过70%。 \
 \

　　之前，由于唱片公司的规定，下载的音乐档案有使用上的限制，由苹果公司的“FairPlay”数位著作权管理技术保护。不过苹果公司一直致力于推广DRM-free，先是一些独立音乐人的音乐开始开放取消版权限制，接著EMI和苹果签订了部分音乐的无版权音乐下载协议，不过换来的是1.29美元/首的歌曲定价，音乐品质则由原来的128Kbit/s提升到了192Kbit/s。2009年1月6日，苹果公司宣布iTunes
Plus为iTunes
Store的新标准，转换商店目录中80%的音乐到无版权保护，4月将达到100%。音质则提升到了256Kbit/s。\
 \
 　iTunes Plus优势简单总结　 \
 \
 •更高的音质，更小的容量。（256Kbps的iTunes Plus
AAC优于320Kbps的MP3，接近无损。） \
 •正确完整无杂质的曲目ID3信息，内嵌官方唱片封面。 \
 •正版身份，值得收藏。\
 \
 \
 　支持AAC的播放器　\
 \
 \
 支持AAC的音乐播放器（典型）\
 \
 iTunes、千千静听、Windows Media Player 11、foobar2000\
 \
 \
 支持视频AAC（M4V）的音乐播放器（典型）\
 \
 iTunes & Quicktime、Windows Media Player 11、暴风影音\
 \
 　支持AAC的设备　 \
 \
 •苹果的全线iPod和iPhone产品； \

•国内外各大品牌的主流随身听机型，如：索尼、艾利和、创新、三星、爱国者、纽曼等；
\

•各大手机品牌的主流机型，如：诺基亚、索尼爱立信、三星、摩托罗拉、夏普等。
\
 　关于Booklet　 \
 \

　　Booklet相当于电子版的内页歌词本，为PDF文件，需要PDF阅读器。常见PDF阅读器有：Adobe
Reader、Foxit Reader。 \
 \
 　关于音乐视频　 \
 \
 　　iTunes Store音乐视频没有版权限制，可以使用支持AAC的播放器直接打开。
\
 \
 　关于iTunes LP　 \
 \
 　　2009年9月9日苹果推出了iTunes
LP，即互动专辑下载，除了歌曲外还内含实时歌词显示、歌手宣传照片册、宣传视频、MV等互动内容，相当于数字虚拟化的“精装CD”。
\
 \
 　　iTunes LP只能在电脑上播放。运行iTunes LP需先安装iTunes
9或更高版本。 \
 \
 \
 \
 　iTunes播放器的使用　\
 \
 　　以Windows为例，毕竟Mac用户是少数，而且Mac用户应该都很熟悉iTunes了。
\
 \
 •设置\
 　　“编辑” - “偏好设置” - “高级”\
 \
 \
 \
 \
 \
 　　“iTunes
Media文件夹位置”：iTunes默认的文件夹是“我的文档我的音乐iTunesiTunes
Music”，推荐设置为非系统盘，避免系统崩溃重装导致你的音乐丢失。点击右侧的“更改”选择文件夹。\
 \
 　　“保持iTunes Media文件夹有序”：推荐选中。 \
 \
 　　“添加到资料库时将文件复制到iTunes
Media文件夹”：推荐选中；iTunes会自动将你添加到资料库的文件复制到你在上面设置的文件夹。好处一，你下载的资源解压后的文件夹可以删掉了，避免电驴下载目录杂乱（当然压缩包请不要删，感谢分流）；好处二，所有加入过资料库的文件在同一目录内，便于管理；好处三，同时选中“保持iTunes
Media文件夹有序”时，iTunes会将文件重命名为“歌曲编号歌曲标题”，并放入“iTunes
Media文件夹” - “表演者” -
“专辑”文件夹内，这样你下载的被重命名过的M4A、MV等就会变回原来的名字了。
\
 \
 •将文件加入资料库\
 　　方法一：“文件” - “将文件添加到资料库”或“将文件夹添加到资料库” \
 \
 \
 \

　　方法二：最简单最直接的办法，把文件或文件夹直接拖到iTunes左边栏的“资料库”，推荐直接拖文件夹。若单独拖文件，iTunes
LP直接拖结尾名为“.itlp”的文件夹，此文件夹在Mac中原本应该是一个文件，在PC上等于直接显示包内容了，把它当一个文件而不是文件夹就好了。\
 \
 \
 \
 •播放\
 　　点击iTunes左边栏“资料库” -
“音乐”便可看到已加入到资料库的音乐。顶部搜索栏左边的三个按钮分别可选择三种不同的显示风格，推荐第一个列表方式，方便实用。点击“名称”、“表演者”、“专辑”可改变排序方式，其中“表演者”有三种实用的排序方式。右键单击这行标题栏可以选择显示的表头项目。
\
 \
 \
 \
 \
 \
 　　按Ctrl+B可显示表演者列表，点击“名称”左侧的箭头可显示专辑封面。 \
 \
 \
 \
 　　播放iTunes LP直接双击相应项目。 \
 \
 \
 \
 •转换MP3\
 　　“编辑” - “偏好设置” - “常规” - “导入设置” - “导入使用：MP3编码器” -
“设置：自定” - “立体声比特率：256 kbps” \
 \
 \
 \
 　　在资料库中右键单击需要转换的曲目（可多选），选择“创建 MP3 版本” \
 \
 \
 \

　　转换完成后的文件会出现在资料库中，不过不容易区分哪个是你新创建的MP3版本，这时你可以查看一下“添加日期”一列，或者右键单击你转换的曲目（两个版本分不出来随便选一个），选择“在Windows
资源管理器中显示”。 \
 \
 \
 \
 　几个下载正版iTunes Plus AAC的社区　 \
 \
 •VeryCD\
 •OppSu\
 •Ukaban\
 　AAC与其它格式频谱比对与说明　 \
 \
 以下内容由AnyMix制作 \
 \
 •工具\
 转换工具：iTunes 9.0.1.8 \
 \
 频谱工具：Audition 3.0 \
 \
 •音源\
 无损 - Cry Me A River.flac（VeryCD提供资源） \
 \
 有损 - Cry Me A River.m4a（正版iTunes Plus） \
 \
 •步骤与说明\
 1.
将无损的FLAC文件由foobar2000转换为带指引文件cue的wav音轨文件。将cue导入Demon
Tools。 \
 \
 2. iTunes会自动搜索虚拟光驱中插入的音轨文件名称信息。 \
 \
 3. 由iTunes分别转换为Apple Loseless、iTunes Plus 256K、MP3 320K
CBR、MP3 320K VBR。 \
 \
 4. 由于Audition不识别Apple
Loseless、M4A文件，再由Foobar2000转换为音轨文件WAV。 \
 \
 5. 全部导入Audition，查看频谱。 \
 \

　　频谱中每一个文件都有两行频谱图。为上下两段，分别表示左右声道。我们所要关注的是纵轴的频段。
\
 \
 •无损FLAC\
 \
 \

　　第一个无损FLAC，从图中我们可以看出整个文件的频段比较完整，看不出有什么失真的情况，因为毕竟是无损的。所谓的无损就是在压缩CD文件时完全保留原有的频段而不会造成失真的存在。整个频谱图20K以上都非常饱满。
\
 \
 •正版iTunes Plus\
 \
 \
 　　第二个图为正版iTunes
Plus，同样可以看到20K以上频谱饱满度非常之高，整个频谱图也和无损几乎相同。文件大小：8.60M（包含内嵌封面）
\
 \
 •用无损FLAC转换出的iTunes Plus 256K文件\
 \
 \
 　　第三个图为用无损转换出的iTunes Plus
256K文件，我们仔细观察，频谱图几乎跟无损相同。大小：8.08M（不包含内嵌封面）
\
 \
 •常用的MP3 320K\
 \
 \
 　　第四个与第五个图都是我们常用的MP3
320K，非常明显，20K以上频谱稀疏，几乎全被截掉。文件大小：9.72M \
 \
 •Apple Loseless\
 \
 \
 　　最后一个是iTunes的特殊格式：Apple
Loseless，顾名思义，也是无损的一种格式，苹果公司的iPod产品不支持现在的APE、FLAC等无损文件，在此也点一下Apple
Loseless。 \
 \

转载自：[http://www.verycd.com/groups/itunesplus/757937.topic](http://www.verycd.com/groups/itunesplus/757937.topic)\

[http://bbs.themex.net/showthread.php?t=16858788](http://bbs.themex.net/showthread.php?t=16858788)

新华社连发六文　痛斥地方政府房产商利益勾结 \
 拍好照片的10个窍门.历史上的今天.\
 相关文章.\
 最近读者\
 登录后，您可以在此留下足迹。. \
 无心插柳 .评论

页脚\
 公司简介 - 联系方法 - 招聘信息 - 客户服务 - 相关法律 - 博客风格 -
手机博客 - 订阅此博客 \
 网易公司版权所有 ©1997-2011\
 \
 \
 \

